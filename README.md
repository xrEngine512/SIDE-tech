# Проект интегрированной среды разработки нового поколения (стадия идеи)

### Идеи (большинство из области научной фантастики)

##### 3-х уровневая JSON конфигурация

[user[instance[project]]] с синхронизацией user - уровня

- user: настройки пользователя, самый базовый уровень, может синхронизироваться в облаке. Хранит параметры которые не будут меняться ни в зависимости от проекта ни от машины. Например, тема оформления, привязки клавиш.
- instance: настройки для конкретной рабочей машины. Например, количество ядер для сборки проекта, пути в файловой системе.
- project: настройки конкретного проекта. Например, toolchain для сборки.


##### фоновая компиляция проекта

Компилировать проект в фоне вместо индексирования, попутно используя возникающие ошибки для Intellisense, а при запуске просто достраивать код.

##### сканирование стиля кода

Автоматически настраивать стиль кода на основе уже имеющегося. Можно выделить кусок кода указав его эталонным, либо работать в пластичном режиме, в котором автонастройка будет происходить на лету во время написания кода.

##### отслеживание сложности кода

В специальном режиме отображения с помощью цвета отображать количество машинного кода, которое будет порождено данной строчкой, с учетом всех вложенностей и без.

##### диаграмма активности кода

Во время выполнения программы показывать граф вызовов ее функций и частоту вызова фунций в виде "температуры ребер". Возможность ставить точки останова на этом графе, которые сработают только при прохождении данного пути и с заданным состоянием стека (значения переменных), что можно использовать также в тестировании (см. дальше).

##### виртуальная среда исполнения

Подмена системных вызовов на свои собственные с предзаготовленным поведением для выявления того как программа поведет себя на различных edge-case-ах и ошибках.
Подмена пользовательских вызовов для возможности изоляции модулей программы друг от друга.

##### дамп внешних воздействий

Можно будет записывать различные аспекты внутренней активности программы из диаграммы активности кода. Например, результаты обращения к системным вызовам. Таким образом можно будет запоминать то какие данные пришли по сокету, какая кнопка была нажата в GUI, какие данные из файла считало приложение и т.д. А также можно будет фиксировать состояние самой программы в виде ключевых значений ключевых переменных, чтобы при воспроизведении ввода, воздействие было оказано на программу только по достижении ею нужного состояния. (Например, чтобы можно было послать нажатие кнопки только в том случае если приложение разрешает ее нажимать).

##### спекулятивное выполнение программы

За счет фоновой компиляции система будет располагать актульным машинным кодом во время написания исходного кода. Система будет запускать этот код в виртуальной среде исполнения и анализировать это поведение на предмет корректности работы с памятью, исключениями, таким образом предвидя часть возможных сценариев аварийного завершения программы. Дамп внешних воздействий позволит более полно анализировать корректность программы, выполняя ее с записанными внешними воздействиями. Виртуальная среда исполнения даст возможность во время спекулятивного выполнения программы производить часть runtime анализа без запуска программ как такового прямо во время написания кода. Однако количество возможных комбинаций ошибок и edge-case-ов системных вызовов может быть очень велико для спекулятивного выполнения, поэтому полное покрытие всех случаев пока не представляется возможным.

##### инъекционное тестирование

Призвано радикально упростить тестирование ПО. За счет диаграммы активности кода можно знать когда, в какой последовательности и с какими значениями были вызваны функции, а за счет виртуальной среды исполнения можно запускать программу для тестирования анализируя то как она взаимодействует с ОС. Этот подход упразднит написание тестов как таковых и избавит от необходимости проектирования ПО под хорошую тестируемость. Вместо этого нужно будет предоставить дамп внешних воздействий (ввод) и ожидаемое поведение программы в виде последовательности системных вызовов, значений переменных на разных этапах выполнения (вывод).

##### инъекционное тестирование в реальном времени

Синергия спекулятивного выполнения программы, инъекционного тестирования, фоновой компиляции кода и виртуальной среды исполнения даст возможность производить тесты в фоне во время редактирования программы (если позволяет процессор).

##### высокоуровневое представление кода (пока нет полного видения)

За счет различнх правил и эвристик среда будет распознавать структуры данных (такие как различные деревья, списки) и представлять их пользователю в графическом виде во время отладки. Это позволит разгрузить мозг от интерпретирования неудобного представления подобных данных в современных IDE и сфокусироваться на самой структуре данных, ее содержимом и поведении.

##### высокоуровневое представление проекта (пока нет полного видения)

Среда будет отображать как различные модули ПО свзяны между собой.

#### Редактирование кода

##### расширенная сводка по коду в зоне скролл бара

Отображение мест вызова, объявления, определения, переопределения, перегрузки функций и методов.
Отображение мест объявления, инициализации, использования, чтения и записи переменных.
Каждый тип обращения обозначается своим, интуитивно понятным символом на скролл баре при установке курсора на символ.
